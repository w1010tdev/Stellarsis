# Stellarsis Wiki - 详细功能说明

## 1. 用户认证与个人资料管理

### 1.1 登录与登出
- **功能描述**：用户通过用户名和密码登录系统
- **使用方法**：访问 `/login` 页面，输入凭据后点击登录
- **安全特性**：密码存储（当前为演示模式，实际应用中应使用哈希）

### 1.2 修改密码
- **功能描述**：用户可以更改自己的登录密码
- **使用方法**：在设置页面（`/settings`）中选择"修改密码"
- **安全要求**：需要输入当前密码进行验证

### 1.3 个人资料设置
- **功能描述**：用户可以设置昵称、名字颜色和徽章
- **使用方法**：在设置页面（`/settings`）中选择"个人资料"
- **自定义选项**：
  - 昵称：显示在聊天和论坛中的名称
  - 颜色：用户名显示的颜色（十六进制格式）
  - 徽章：身份标识

## 2. 聊天系统

### 2.1 聊天室浏览
- **功能描述**：用户可以查看自己有权限访问的聊天室
- **使用方法**：访问 `/chat` 页面，系统会显示用户有权访问的房间列表
- **权限说明**：用户只能看到被授权的聊天室

### 2.2 聊天室参与
- **功能描述**：在特定聊天室中发送和接收消息
- **使用方法**：点击聊天室名称进入，使用消息输入框发送消息
- **消息格式**：支持 Markdown 语法，包括粗体、斜体、代码块等
- **实时通信**：使用 Socket.IO 实现实时消息传递

### 2.3 消息管理
- **功能描述**：用户可以删除自己的消息（权限为 777 时）或任意消息（权限为 su 时）
- **使用方法**：点击消息旁边的删除按钮
- **权限控制**：
  - `su`：可以删除任意消息
  - `777`：只能删除自己的消息
  - `444`：只能查看
  - `Null`：无权限

### 2.4 聊天室创建与管理（管理员）
- **功能描述**：管理员可以创建、编辑、删除聊天室
- **使用方法**：在管理员面板（`/admin/chat`）中操作
- **权限分配**：可以为用户分配不同聊天室的权限

## 3. 论坛系统

### 3.1 论坛分区浏览
- **功能描述**：用户可以查看自己有权限访问的论坛分区
- **使用方法**：访问 `/forum` 页面，系统会显示用户有权访问的分区列表

### 3.2 发帖与回帖
- **功能描述**：在论坛分区中创建主题帖和回复
- **使用方法**：
  - 发帖：点击分区后点击"发帖"按钮
  - 回帖：在主题帖页面使用回复框
- **权限控制**：只有权限为 777 或 su 的用户可以发帖和回帖

### 3.3 主题管理
- **功能描述**：用户可以删除自己的主题帖（权限为 777 时）或任意主题帖（权限为 su 时）
- **使用方法**：在主题帖页面点击删除按钮
- **权限说明**：管理员拥有所有权限

### 3.4 论坛分区管理（管理员）
- **功能描述**：管理员可以创建、编辑、删除论坛分区
- **使用方法**：在管理员面板（`/admin/forum`）中操作
- **权限分配**：可以为用户分配不同分区的权限

## 4. 用户关注系统

### 4.1 关注用户
- **功能描述**：关注特定用户，当被关注用户上线时会收到通知
- **使用方法**：
  - 方法一：在设置页面（`/settings/follows`）搜索并关注用户
  - 方法二：在在线用户列表中点击关注按钮
- **通知机制**：被关注用户上线/下线时，系统会广播通知给关注者

### 4.2 关注列表管理
- **功能描述**：查看和管理自己的关注列表
- **使用方法**：访问 `/settings/follows` 页面
- **操作功能**：可以取消关注、查看关注时间等

## 5. 权限管理系统

### 5.1 权限级别说明
- **su（超级用户）**：拥有所有权限，可以管理所有内容
- **777（高级用户）**：可以发送消息/发帖，可以删除自己的内容
- **444（查看用户）**：只能查看内容，不能发送
- **Null（无权限）**：无法访问该资源

### 5.2 权限分配
- **功能描述**：管理员可以为用户分配不同资源的权限
- **使用方法**：在管理员面板中选择用户，然后分配聊天室或论坛分区权限
- **自动权限**：管理员自动拥有所有资源的 su 权限

## 6. 管理员面板

### 6.1 系统概览
- **功能描述**：显示系统统计信息，包括用户数、在线数、消息数等
- **使用方法**：访问 `/admin` 页面

### 6.2 用户管理
- **功能描述**：管理所有用户，包括创建、编辑、删除用户
- **使用方法**：访问 `/admin/users` 页面
- **批量导入**：支持通过 CSV 文件批量导入用户

### 6.3 聊天管理
- **功能描述**：管理聊天室和聊天消息
- **使用方法**：访问 `/admin/chat` 页面
- **消息清理**：可以按时间或房间清理消息

### 6.4 论坛管理
- **功能描述**：管理论坛分区和帖子
- **使用方法**：访问 `/admin/forum` 页面
- **内容管理**：可以删除帖子和回复

### 6.5 系统工具
- **功能描述**：提供系统维护工具
- **可用工具**：
  - 系统日志查看
  - 数据库备份
  - 系统优化
  - 服务器重启/关停
  - 源码下载
  - 数据库下载

### 6.6 文件管理
- **功能描述**：管理员可以直接编辑服务器文件
- **使用方法**：访问 `/admin/file_manager` 页面
- **安全限制**：防止编辑危险文件类型

## 7. 前端功能

### 7.1 实时通知系统
- **功能描述**：实时显示用户上线/下线、新消息等通知
- **实现方式**：使用 Socket.IO 实现实时通信
- **未读计数**：显示聊天室和论坛分区的未读消息数

### 7.2 主题切换
- **功能描述**：用户可以切换不同的界面主题
- **使用方法**：点击界面右上角的主题切换按钮
- **可用主题**：提供多种预设主题

### 7.3 命令面板
- **功能描述**：快速访问系统功能的命令面板
- **使用方法**：按 `Ctrl+K` 或 `Cmd+K` 打开命令面板
- **可用命令**：导航到不同页面、执行常用操作

### 7.4 响应式设计
- **功能描述**：适配不同设备屏幕尺寸
- **实现方式**：使用 CSS 媒体查询和弹性布局
- **用户体验**：在桌面和移动设备上都有良好体验

## 8. 安全特性

### 8.1 输入验证
- **功能描述**：对所有用户输入进行验证和清理
- **防护措施**：XSS 防护、SQL 注入防护
- **内容过滤**：限制危险 HTML 标签

### 8.2 权限验证
- **功能描述**：确保用户只能访问有权限的资源
- **验证机制**：每次请求都验证用户权限
- **访问控制**：细粒度的访问控制策略

### 8.3 日志记录
- **功能描述**：记录系统操作和管理员活动
- **日志类型**：系统日志、管理员操作日志
- **安全审计**：便于安全审计和问题排查